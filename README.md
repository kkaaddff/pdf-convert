# PDF é»‘ç™½è½¬æ¢æœåŠ¡

åŸºäº Python 3.12 + FastAPI çš„ Web æœåŠ¡ï¼Œæ”¯æŒä¸Šä¼  PDF æ–‡ä»¶å¹¶å°†å…¶è½¬æ¢ä¸ºé»‘ç™½/ç°åº¦ç‰ˆæœ¬ï¼Œæä¾›å¤šæ¡£ç°åº¦çº§åˆ«é€‰æ‹©å’Œå®æ—¶é¢„è§ˆåŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¯ **PDF è½¬æ¢**: å°†å½©è‰² PDF è½¬æ¢ä¸ºé»‘ç™½/ç°åº¦ç‰ˆæœ¬
- ğŸ“Š **å¤šæ¡£ç°åº¦**: æ”¯æŒ 1-4 æ¡£ç°åº¦çº§åˆ«é€‰æ‹©
- ğŸ‘€ **å®æ—¶é¢„è§ˆ**: æ”¯æŒè½¬æ¢å‰åå¯¹æ¯”é¢„è§ˆ
- ğŸ“„ **åˆ†é¡µæµè§ˆ**: æ”¯æŒå¤šé¡µ PDF çš„ç¿»é¡µæŸ¥çœ‹
- ğŸ” **ç¼©æ”¾æ§åˆ¶**: é¢„è§ˆå›¾ç‰‡ç¼©æ”¾åŠŸèƒ½
- ğŸ“± **å“åº”å¼è®¾è®¡**: æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- ğŸ³ **Docker æ”¯æŒ**: æä¾› Docker å®¹å™¨åŒ–éƒ¨ç½²

## ç°åº¦æ¡£ä½è¯´æ˜

| æ¡£ä½ | è‰²é˜¶æ•° | ç°åº¦å€¼ | æè¿° |
|------|--------|--------|------|
| 1 æ¡£ | 2 | 0, 255 | çº¯é»‘ç™½ï¼ˆäºŒå€¼åŒ–ï¼‰ |
| 2 æ¡£ | 3 | 0, 127, 255 | é»‘ç™½ + 50% ç° |
| 3 æ¡£ | 4 | 0, 85, 170, 255 | é»‘ç™½ + 33%/66% ç° |
| 4 æ¡£ | 5 | 0, 64, 127, 191, 255 | é»‘ç™½ + 25%/50%/75% ç° |

## æŠ€æœ¯æ ˆ

- **åç«¯**: Python 3.12 + FastAPI
- **å‰ç«¯**: HTML + CSS + JavaScript (åŸç”Ÿ)
- **PDF å¤„ç†**: PyMuPDF (fitz) + Pillow
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **å¼€å‘ç¯å¢ƒ**: Conda (fta-xrun-chat-bot)

## å¿«é€Ÿå¼€å§‹

### ä½¿ç”¨ Docker (æ¨è)

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd pdf-convert

# å¯åŠ¨æœåŠ¡
./start.sh

# è®¿é—®æœåŠ¡
open http://localhost:8000
```

### æœ¬åœ°å¼€å‘

```bash
# æ¿€æ´» Conda ç¯å¢ƒ
conda activate fta-xrun-chat-bot

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
./dev.sh

# æˆ–è€…æ‰‹åŠ¨å¯åŠ¨
pip install -r requirements.txt
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

## API æ¥å£

### PDF è½¬æ¢
```
POST /api/convert
Content-Type: multipart/form-data

å‚æ•°:
- file: PDF æ–‡ä»¶ (æœ€å¤§ 50MB)
- gray_levels: ç°åº¦æ¡£ä½ (1-4, é»˜è®¤: 2)

å“åº”:
{
  "task_id": "uuid",
  "status": "processing",
  "message": "PDF è½¬æ¢å·²å¼€å§‹"
}
```

### æŸ¥è¯¢çŠ¶æ€
```
GET /api/status/{task_id}

å“åº”:
{
  "task_id": "uuid",
  "status": "completed",  // processing, converting, completed, error
  "progress": 100,        // 0-100
  "page_count": 10,
  "error": null
}
```

### ä¸‹è½½ç»“æœ
```
GET /api/download/{task_id}

å“åº”: è½¬æ¢åçš„ PDF æ–‡ä»¶
```

### é¡µé¢é¢„è§ˆ
```
GET /api/preview/{task_id}/{page}?preview_type=original|converted

å“åº”: é¡µé¢å›¾ç‰‡ (PNG)
```

## é¡¹ç›®ç»“æ„

```
pdf-convert/
â”œâ”€â”€ SPEC.md                 # é¡¹ç›®è§„æ ¼è¯´æ˜
â”œâ”€â”€ README.md               # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ requirements.txt        # Python ä¾èµ–
â”œâ”€â”€ Dockerfile              # Docker é•œåƒæ„å»ºæ–‡ä»¶
â”œâ”€â”€ docker-compose.yml      # Docker Compose é…ç½®
â”œâ”€â”€ start.sh                # Docker å¯åŠ¨è„šæœ¬
â”œâ”€â”€ dev.sh                  # æœ¬åœ°å¼€å‘å¯åŠ¨è„šæœ¬
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py             # FastAPI åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ pdf_converter.py # PDF è½¬æ¢æ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ static/
â”‚   â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”‚   â””â”€â”€ style.css   # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ js/
â”‚   â”‚       â””â”€â”€ app.js      # å‰ç«¯äº¤äº’é€»è¾‘
â”‚   â””â”€â”€ templates/
â”‚       â””â”€â”€ index.html      # Web é¡µé¢æ¨¡æ¿
â”œâ”€â”€ uploads/                # ä¸Šä¼ æ–‡ä»¶ä¸´æ—¶å­˜å‚¨
â””â”€â”€ outputs/                # è½¬æ¢ç»“æœä¸´æ—¶å­˜å‚¨
```

## æ€§èƒ½è¦æ±‚

- âœ… å•é¡µ PDF è½¬æ¢æ—¶é—´: < 2 ç§’
- âœ… æ”¯æŒæœ€å¤§ PDF é¡µæ•°: 100 é¡µ
- âœ… æ”¯æŒæœ€å¤§æ–‡ä»¶å¤§å°: 50 MB
- âœ… å¹¶å‘å¤„ç†èƒ½åŠ›: 10 ä¸ªåŒæ—¶è½¬æ¢ä»»åŠ¡

## å®‰å…¨ç‰¹æ€§

- ğŸ”’ æ–‡ä»¶ç±»å‹éªŒè¯ï¼ˆä»…æ¥å— PDFï¼‰
- ğŸ“ æ–‡ä»¶å¤§å°é™åˆ¶
- ğŸ§¹ ä¸´æ—¶æ–‡ä»¶å®šæœŸæ¸…ç†ï¼ˆ1å°æ—¶åè‡ªåŠ¨åˆ é™¤ï¼‰
- ğŸ›¡ï¸ é˜²æ­¢è·¯å¾„éå†æ”»å‡»

## å¼€å‘è¯´æ˜

### ç¯å¢ƒè¦æ±‚

- Python 3.12+
- Node.js (å¯é€‰ï¼Œç”¨äºå‰ç«¯å¼€å‘å·¥å…·)
- Docker (ç”¨äºå®¹å™¨åŒ–éƒ¨ç½²)

### æœ¬åœ°å¼€å‘

```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# API æ–‡æ¡£
open http://localhost:8000/docs
```

### æµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯• (å¦‚æœå­˜åœ¨)
python -m pytest

# ä»£ç æ ¼å¼æ£€æŸ¥
black app/
flake8 app/
```

## éƒ¨ç½²è¯´æ˜

### Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t pdf-convert .

# è¿è¡Œå®¹å™¨
docker run -p 8000:8000 -v $(pwd)/uploads:/app/uploads -v $(pwd)/outputs:/app/outputs pdf-convert

# ä½¿ç”¨ docker-compose
docker-compose up -d
```

### ç”Ÿäº§ç¯å¢ƒ

å»ºè®®ä½¿ç”¨ä»¥ä¸‹é…ç½®ï¼š
- **åå‘ä»£ç†**: Nginx
- **è¿›ç¨‹ç®¡ç†**: Gunicorn + Uvicorn
- **ä»»åŠ¡é˜Ÿåˆ—**: Celery + Redis (ç”¨äºå¤§è§„æ¨¡å¹¶å‘)

## å¸¸è§é—®é¢˜

### 1. PDF è½¬æ¢å¤±è´¥
- æ£€æŸ¥æ–‡ä»¶æ˜¯å¦ä¸ºæœ‰æ•ˆçš„ PDF æ ¼å¼
- ç¡®è®¤æ–‡ä»¶å¤§å°ä¸è¶…è¿‡ 50MB
- ç¡®è®¤é¡µæ•°ä¸è¶…è¿‡ 100 é¡µ

### 2. é¢„è§ˆå›¾ç‰‡æ˜¾ç¤ºå¼‚å¸¸
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- ç¡®è®¤è½¬æ¢ä»»åŠ¡å·²å®Œæˆ
- å°è¯•åˆ·æ–°é¡µé¢

### 3. Docker å¯åŠ¨å¤±è´¥
- ç¡®è®¤ Docker æœåŠ¡å·²å¯åŠ¨
- æ£€æŸ¥ç«¯å£ 8000 æ˜¯å¦è¢«å ç”¨
- æŸ¥çœ‹å®¹å™¨æ—¥å¿—: `docker-compose logs`

## ç‰ˆæœ¬ä¿¡æ¯

- **ç‰ˆæœ¬**: 1.0.0
- **åˆ›å»ºæ—¥æœŸ**: 2024-12-17
- **Python ç‰ˆæœ¬**: 3.12
- **è®¸å¯è¯**: MIT

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- é¡¹ç›® Issues: [GitHub Issues](https://github.com/your-username/pdf-convert/issues)
- é‚®ç®±: your-email@example.com

---

ğŸ‰ **æ„Ÿè°¢ä½¿ç”¨ PDF é»‘ç™½è½¬æ¢æœåŠ¡ï¼**